---
title: Getting started with Yocto with RPI4
abstract: 'Abstract first sentence.
          Abstract second sentence.
          Abstract third sentence.'
cover: /covers/image-file.png
author: pawel.zaborny
layout: post
published: true
date: 2020-02-13
archives: "2020"

tags:
  - rpi4
  - yocto
categories:
  - IoT

---

## What's new?
TODO
Since it's release Raspberry had a huge impact on the industry. (...) 
Especially the third generation reaching approximately 6mln seles per year by
 the time of Raspberry Pi 4 Model B release.

Is a new model the game changer? Definitely, it is!

The Raspberry Pi 4 takes Pi to another level, with the performance thatâ€™s good
 enough to use in a pinch as a desktop PC. The company claims that the new 
model is able to handle 4k video at 60Hz or power dual monitors. 

It's not a hollow statement. Many tests proved that there's a huge leap 
between third and fourth generation. A Linpack offers a glimpse at just how
 far the Raspberry Pi family has come. Roy Longbottom version of a synthetic
 benchmark measures parameters such as: the fast single precision,
 double-precision and a single-precision accelerated by NEON instruction 
available since Raspberry Pi 2. From benchmark perspective we can notice
tremendous increase in performance over Pi 3B+ model:
* 4 times 

TODO - add some other benchmark and changes in rpi4

Yocto for rpi4

TODO - describe a goal (e.g. building a minimal image in yocto for rpi4)

Before we start make sure that all required tools are installed. Type: 
``` 
$ sudo apt-get install gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential chrpath socat libsdl1.2-dev xterm python 
```
to install missing packages. 

At this point, we can start for real. First of all, let's download Yocto then
 switch to the "zeus" branch which is the newest community version of Yocto
 at the time of writing this post. 
```
mkdir Yocto
cd Yocto
git clone -b zeus http://git.yoctoproject.org/git/poky 
```
When cloning is finished we need to create a build directory and set up all the
 environmental variables, paths, etc. It can be obtained by typing

```
cd poky
source oe-init-build-env
```
Yocto repository contains an extremally useful layer containing board support
 package called meta-raspberry pi that we need to add to our working directory
```
cd ~/Yocto
git clone -b zeus git://git.yoctoproject.org/meta-raspberrypi 
```

Before we build we need to make some changes in crucial configuration files
Let's start from editing `bblayers.conf` located in `~/Yocto/poky/build`. 
This file tells bitbake about the location of various layers locations which 
are used to configure things like the target of a build and the location of 
output files. 

Fist of all we need to add `meta-raspberrypi` and `meta-rpilinux` layers we
 can do that by appending it to BBLAYERS. The resault should look like this
```
BBLAYERS ?= " \
<projectPath>/Yocto/poky/meta \
<projectPath>/Yocto/poky/meta-poky \
<projectPath>/Yocto/poky/meta-yocto-bsp \
<projectPath>/Yocto/meta-raspberrypi \
<projectPath>/Yocto/meta-rpilinux \
" 
```



Your post content

> any special characters (e.q. hashtags) in the post title and abstract should be
  wrapped in the apostrophes

> avoid using quotation marks in the title, because search-engine will broke

> post abstract in the header is required for the posts summary in the blog list
  and must contain from 3 to 5 sentences, please note that abstract would be used
  for social media and because of that should be focused on keywords/hashtags

> post cover image should be located in `blog/static/covers/` directory or may be
  linked to `blog/static/img/` if image is used in post content

> author meta-field MUST be strictly formatted (lowercase, non-polish letters):

```
author: pawel.zaborny
```

> if post has multiple authors, author meta-field MUST be strictly formatted:

```
author:
    - name.surname
    - name.surname
```

> remove unused categories

> remember about newlines before lists, tables, quotes blocks (>) and blocks of
  text (\`\`\`)

> copy all post images to `blog/static/img` directory. Example usage:

![alt-text](/img/file-name.jpg)

> example usage of asciinema videos:

[![asciicast](https://asciinema.org/a/xJC0QaKuHrMAPhhj5KMZUhMEO.svg)](https://asciinema.org/a/xJC0QaKuHrMAPhhj5KMZUhMEO?speed=1)

## Summary

Summary of the post.

OPTIONAL ending (may be based on post content):

If you think we can help in improving the security of your firmware or you
looking for someone who can boost your product by leveraging advanced features
of used hardware platform, feel free to [book a call with us](https://calendly.com/3mdeb/consulting-remote-meeting)
or drop us email to `contact<at>3mdeb<dot>com`. If you are interested in similar
content feel free to [sing up to our newsletter](http://eepurl.com/gfoekD)
